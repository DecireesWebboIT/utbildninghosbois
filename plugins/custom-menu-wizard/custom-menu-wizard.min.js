/*Source: custom-menu-wizard.js
 *Compiled: 2016-04-15, Google Closure Compiler...
 *STATISTICS
 * - originalSize: 87814
 * - originalGzipSize: 20231
 * - compressedSize: 27257
 * - compressedGzipSize: 8679
*/
jQuery(function(f){
'use strict';
var z,M=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)/g,u=function(b){return window.Custom_Menu_Wizard_Texts?window.Custom_Menu_Wizard_Texts[b]||b:b},x=function(b,a){return(a?".":"")+"widget-custom-menu-wizard-"+b},C=function(b){var a=f(this).data().cmwInstanceVersion.replace(/\./g,""),a=/^\d+$/.test(a)?"v"+a:a;z[a]?z[a].update(b?b.target:this):z.update(b?b.target:this)},I=function(b,a){var c=!1===b,d={},e=
!c&&"2.1.0"===b.data().cmwInstanceVersion,k={items:1,exclude:1},g=f.extend({branch_start:1,exclude_level:1,include_level:1},k);f.each(c?a:b.find(":input").serializeArray(),function(a,b){var c=b.name.replace(/.*\[([^\]]+)\]$/,"$1"),h=!g[c]&&/^-?\d+$/.test(b.value)?parseInt(b.value,10):b.value;d[c]=h;k[c]&&(d["_"+c+"_sep"]=!h||/(^-?\d+\+?$|,)/.test(f.trim(h))?",":" ",h=f.map(h.split(/[,\s]+/),function(a){var b=!e&&/\+$/.test(a);a=a?parseInt(a,10):0;return isNaN(a)||!a?null:b?a+"+":a}),d["_"+c]=h.join(d["_"+
c+"_sep"]))});return d},E=function(b,a,c,d){var e=d.switch_if;return d.switch_at===b&&("current"===e&&a||"no-current"===e&&!a||"no-output"===e&&!c)},R=function(b,a){b=f.trim(b||"");for(var c={title:"",level:1,branch:0,items:"",depth:0,depth_rel_current:0,start_at:"",start_mode:"",allow_all_root:0,ancestors:0,ancestor_siblings:0,include_root:0,include_level:"",siblings:0,exclude:"",exclude_level:"",contains_current:"",fallback:"",flat_output:0,title_from:"",title_linked:0,ol_root:0,ol_sub:0},d=M.exec(b),
e={},k=0;d;)k+=1,d[1]?e[d[1]]=d[2]:d[3]?e[d[3]]=d[4]:d[5]?e[d[5]]=d[6]:--k,d=M.exec(b);k&&f.each(e,function(a,b){c[a]=b});d=!!c.items;e=!d&&!!c.branch;k=!d&&!e;d&&(c.filter="items");if(e){c.filter="branch";d=c.start_at.toString();c.branch_start=d;if("0"===d||"branch"===d)c.branch_start="";"root"===d&&(c.branch_start="1");"children"===d&&(c.branch_start="+1");"parent"===d&&(c.branch_start="-1");if("current"===c.branch||"current-item"===c.branch)c.branch=0;else if(!/^[+\-]?\d+$/.test(c.branch.toString()))if(c.branch=
c.branch.toLowerCase(),d=a.find("a.cmw-item").filter(function(){return f(this).text().toLowerCase()===c.branch}),d.length)c.branch=d.parent().data("itemid");else return!1}k&&(c.filter="",c.level=Math.max(1,parseInt(c.level,10)));c.start_at=null;c.include_level||"1"!==c.include_root||(c.include_level="1");c.include_root=null;if(e&&!c.branch&&c.fallback&&(e=c.fallback.toLowerCase().split(/[\s,]+/),d=" "+e.join(" ")+" ",c.fallback="",0<=d.indexOf(" quit ")?c.fallback="quit":0<=d.indexOf(" parent ")?
c.fallback="parent":0<=d.indexOf(" current ")&&(c.fallback="current"),""!==c.fallback&&"quit"!==c.fallback))for(0<=d.indexOf(" +siblings ")&&(c.fallback_siblings=1),k=0;k<e.length;k+=1)if(/^\d+$/.test(e[k])&&(d=parseInt(e[k],10),0<d)){c.fallback_depth=d;break}if(c.title_from)for(e=c.title_from.toLowerCase().split(/[\s,]+/),k=0;k<e.length;k+=1)if(e[k])if("branch"===e[k]||"current"===e[k])c["title_"+e[k]]="0";else if(d=e[k].match(/^(branch|current)(-root|-parent|[+\-]?\d+)$/))"-root"===d[2]?c["title_"+
d[1]]=1:"-parent"===d[2]?c["title_"+d[1]]=-1:(c["title_"+d[1]]=d[2],c["title_"+d[1]]||(c["title_"+d[1]]=""));c.title_from=null;return I(!1,f.map(c,function(a,b){return null===a?a:{name:b,value:a}}))},N=function(b){var a="";b&&(a=b.replace(/[\r\n\t]+/g," ").replace(/^[\[\s]+/,"").replace(/[\s\/\]]+$/,"").split(/[\[\]]/)[0],a=f.trim(a.replace(/\/+$/,""))+" ",a=" "+a.replace(/^cmwizard\s/,"")+" ",a=f.trim(a.replace(/\s(menu|widget)=[^\s]*/g," ").replace(/\salternative=("[^"]*"|[^\s]*)/g," ")),a=a.replace(/\s\s+/g,
" "));return a},F=function(b,a){var c=a.find(".cmw-demo-themenu-ul"),d=c.data(),e=N(b.switch_to),e="cmwizard menu="+b.menu+(""===e?e:" "+e);d.altCode&&d.altCode===e||(d.altCode=e,d.altSettings=R(e,c));a.find(".cmw-demo-alternative").addClass("updated").toggleClass("error",!1===d.altSettings);return!1===d.altSettings?!1:f.extend({},d.altSettings)},J=function(b,a,c){var d="tick"===c?"_items_sep":"_exclude_sep",e=[],k="tick"===c?"_items":"_exclude",d=a[d],k=a[k]?f.grep(a[k].split(d),function(a){return/\+$/.test(a)?
(e.push(parseInt(a,10)),!a):!!a}):[],k=d+k.join(d)+d,e=d+e.join(d)+d;b=b.each(function(){var a=f(this),b=a.data(),p=-1<e.indexOf(d+b.itemid+d),b=p||-1<k.indexOf(d+b.itemid+d);a.toggleClass("cmw-has-"+c,b).toggleClass("cmw-inherit-"+c,p)});return b.filter(".cmw-inherit-"+c).find("li").removeClass("cmw-has-"+c+" cmw-inherit-"+c).add(b.filter(".cmw-has-"+c))},y=function(b,a){return b[a?"find":"closest"](x("onchange",1))},O=function(b,a){var c=[],d=b.match(/^(\d+)(\+|-)?$/),e,d=d?[parseInt(d[1],10),d[2]||
""]:[];if(0<d[0])for(e=1;e<=a;e+=1)(e===d[0]||"-"===d[1]&&e<d[0]||"+"===d[1]&&e>d[0])&&c.push(".level-"+e);return c.join(",")},P=function(b,a){var c=b.find(".cmw-demo-themenu-ul"),d=c.find(".picked"),e="",k=a.hide_title?"":a.title,g=0,m=0,p=b.find(".cmw-demo-theoutput-wrap").empty(),r=["menu-widget"],h={};if(d.length&&p.length){k=c.find(".title-from-item").children(".cmw-item").find("strong").text()||"";g=!!k&&!!a.title_linked;k||a.hide_title||(k=a.title||"");for(d.each(function(b){var c=f(this),
d=c.data(),g=d.trace?d.trace.toString().split(","):[];b=d.itemid.toString();var k=1,c=c.children(".cmw-item");if(!a.flat_output)for(h[b]=1,b=0;b<g.length;b+=1)h[g[b]]&&(k+=1);if(m)if(k>m)e+=a.ol_sub?"<ol>":"<ul>";else{for(;m>k;)--m,e+="</li>"+(a.ol_sub?"</ol>":"</ul>");e+="</li>"}e+='<li class="cmw-level-'+k+(d.included||"")+'"><a href="#'+c.data("indx")+'">'+c.find("strong").text()+"</a>";m=k});1<m;)--m,e+="</li>"+(a.ol_sub?"</ol>":"</ul>");e+="</li>";r.push(b.find(".cmw-demo-fallback").data("fellback"));
e=(a.ol_root?"<ol":"<ul")+' class="'+f.trim(r.join(" "))+'">'+e+(a.ol_root?"</ol>":"</ul>");p.html(e);p.find("li").filter(function(){return!!f(this).children("ul, ol").length}).addClass("cmw-has-submenu")}p.length&&k&&d.length&&p.prepend((g?'<h3 class="cmw-title-linked">':"<h3>")+k+"</h3>")},Q=function(b,a,c){var d;b.find("optgroup").filter(function(){var a=f(this).data().cmwOptgroupIndex===c;a||f(this).remove();return a}).length||(d=f("#"+b.attr("id")+"_ignore").find("optgroup").eq(c).clone(),d.length&&
(0<a&&(a=0),b.append(d).val(a)));return a},S=function(b){b=f(this);var a=b.data(),c=!a.cmwAbsolute,d=b.closest(".ui-dialog"),e=d.find(".ui-dialog-content"),k=parseInt(d.css("top"),10)+(c?1:-1)*f(document).scrollTop();a.cmwAbsolute=c;a.cmwMaxHeight||(a.cmwMaxHeight=e.dialog("option","maxHeight"));b.children("span").toggleClass("dashicons-no-alt",c);d.toggleClass("cmw-assistance-dialog-fixed",!c);e.dialog("option",{maxHeight:c?!c:a.cmwMaxHeight});d.css("top",k);return!1},T=function(b){f(this).closest(".widget-custom-menu-wizard-dialog").toggleClass("cmw-show-item-extras");
this.blur();return!1},U=function(b){var a=f(this);b=["current-menu-item","current-menu-parent","current-menu-ancestor"];var c=a.closest(".ui-dialog-content"),d=c.find(".cmw-demo-themenu-ul"),a=a.find("span").not("."+b[0]).parentsUntil(d,"li"),e,k=function(){this.title=this.title+" : "+e.replace(" "," & ").replace(/-/g," ")};d.find("."+b.join(",.")).removeClass(b.join(" ")).each(function(){this.title=this.title.replace(/\s:\s.*$/,"")});for(d=0;d<a.length;d+=1)e=1===d?b.join(" "):b[0],a.eq(d).children(".cmw-item").find("span").addClass(e).each(k),
1<b.length&&b.shift();C.call(f(c.data().cmwOnchange).get(0));this.blur();return!1},V=function(b){f(this).closest(".ui-dialog-content").find(".cmw-item").eq(this.href.split("#")[1]).not(":has(.current-menu-item)").trigger("click");this.blur();return!1},W=function(b){b=f(this);var a=b.hasClass("cmw-tick")?"tick":"cross",c=b.parent();b=c.closest(".cmw-demo-themenu-ul");var d=c.hasClass("cmw-inherit-"+a),e=d||c.hasClass("cmw-has-"+a),k=e?f([]):c.parentsUntil(b,".cmw-inherit-"+a),g=f(c.closest(".ui-dialog-content").data().cmwOnchange).find("tick"===
a?".cmw-setitems":".cmw-exclusions"),m;!b.hasClass("cmw-using-alternative")&&g.length&&(m=b.find(".cmw-has-"+a)[d||k.length?"not":"add"](c),!e||c.children("ul").length&&!b.parent().hasClass("cmw-version-210")?e&&!d&&(m=m.not(c.find(".cmw-has-"+a))):m=m.not(c),m=m.add(k.find("li").not(c)),m=m.map(function(){var b=this===c[0]||this===k.get(0)?e:f(this).hasClass("cmw-inherit-"+a);return f(this).data().itemid+(b?"+":"")}).get().join(/(,|^-?\d+\+?$)/.test(f.trim(g.val())||",")?",":" "),g.val(m).trigger("change"));
this.blur();return!1},X=function(b){var a={autoOpen:!1,width:Math.min(.9*f(window).width(),600),maxHeight:f(window).height()-40,modal:!1,containment:"window",create:function(){var a=f(this).closest(".ui-dialog");a.hasClass("cmw-assistance-dialog-fixed")&&f("<a/>").addClass("cmw-dialog-fixed-absolute button-secondary").append(f("<span/>").addClass("dashicons-before dashicons-yes").text(u("fixed"))).on("click",S).appendTo(a.find(".ui-dialog-titlebar"))},dragStop:function(){f(this).dialog("option","height",
"auto")},dialogClass:"cmw-assistance-dialog cmw-assistance-dialog-fixed"},c=f.map(["setcurrent","inclusions","exclusions","fallback","alternative"],function(a){return'<div class="cmw-demo-'+a+' cmw-demo-small">'+u(a)+"</div>"});b=f("<div/>",{id:b.cmwDialogId}).addClass(x("dialog")).append(f("<div/>").addClass("cmw-demo-themenu cmw-version-"+b.cmwInstanceVersion.replace(/\./g,"")).html('<em class="cmw-demo-small">'+u("prompt")+"</em>")).append(f("<div/>").addClass("cmw-demo-theoutput cmw-corners").html('<em class="cmw-demo-small">'+
u("output")+'</em><em class="cmw-demo-plugin-version cmw-demo-small">v'+b.cmwInstanceVersion+"</em>"+c.shift()+'<div class="cmw-demo-theoutput-wrap cmw-corners"></div>'+c.join(""))).append(f("<div/>").addClass("cmw-demo-theshortcode").html('<code class="cmw-corners"></code><a class="button-secondary cmw-toggle-item-extras"><span>'+u("more")+"</span><span>"+u("less")+'</span></a><div class="cmw-find-shortcodes"><a href="#" class="button-secondary '+x("find-shortcodes")+'" data-nonce="'+(b.cmwDialogNonce||
"")+'" title="'+u("shortcodes")+'"><span class="spinner"></span><span>[&hellip;]</span></a></div><div class="cmw-demo-found-shortcodes cmw-demo-small cmw-corners"></div>'));b.dialog(a);b.on("click",".cmw-toggle-item-extras",T).find(".cmw-demo-themenu").on("click",".cmw-tick,.cmw-cross",W).on("click",".cmw-item",U);b.find(".cmw-demo-theoutput").on("click","a",V);return b},K=function(b,a){var c=a.find(".cmw-widget-title").val()||b.data().cmwUntitled;b.dialog("option","title","CMW : "+c+" ["+a.find(".cmw-select-menu").find("option:selected").text()+
"]")},L=function(b){var a=f(b.data().cmwOnchange),c=parseInt(a.find(".cmw-select-menu").val(),10),d=b.find(".cmw-demo-themenu-ul"),e=[],k=0,g="",m=function(a){return 1<a?'<a href="#" class="'+x("colexp")+' dashicons dashicons-arrow-right" style="left:-'+(1.3*(a-2)+1.1)+'em;">&nbsp;</a>':""};if(!d.length||d.data("menuid")!==c){for(a.find(".cmw-assist-items optgroup").find("option").each(function(a){for(var b=f(this),c=b.data(),d=c.cmwLevel,c=c.cmwType||"";d<e.length;)g+="</li></ul>"+m(e.length),e.pop();
d>e.length?g+="<ul>":(g+="</li>",e.pop());g+='<li class="level-'+d+'" data-itemid="'+this.value+'" data-level="'+d+'" data-trace="'+e.join(",")+'">';g+='<a href="#" class="cmw-cross cmw-corners"></a>';g+='<a class="cmw-item cmw-corners" href="#" data-indx="'+a+'"><span class="cmw-corners" title="#'+this.value+" "+c+'">';g+="<strong>"+f.trim(b.text())+"</strong>";g+='<i class="cmw-item-extra"><i>'+this.value+"</i>"+c+"</i>";g+='</span></a><a href="#" class="cmw-tick cmw-corners"></a>';e.push(this.value);
d>k&&(k=d)});e.length;)g+="</li></ul>"+m(e.length),e.pop();d.remove();b.find(".cmw-demo-themenu").append(f(g).addClass("cmw-demo-themenu-ul").data({maxLevel:k,menuid:c}));b.dialog("option","height","auto")}};z={setLevels:function(b,a){var c=b.find(".cmw-branch-start"),d=c.val();a&&(c.find("optgroup").each(function(b){var c=f(this),d=c.find("option"),m=d.length;if(b)for(d.slice(a).remove();m<a;)m+=1,c.append(f("<option/>",{value:m}).text(m));else for(m=(m+1)/2,m>a&&d.each(function(b,c){Math.abs(c.value)>=
a&&f(c).remove()});m<a;)c.prepend(f("<option/>",{value:-m}).text(-m+(1<m?"":" ("+u("parent")+")"))).append(f("<option/>",{value:"+"+m}).text("+"+m+(1<m?"":" ("+u("children")+")"))),m+=1}),/^\d+$/.test(d)?d>a&&c.val("1"):""!==d&&Math.abs(d)>=a&&c.val(""),b.find(".cmw-set-rel-abs-levels").each(function(){var b=f(this),c=b.hasClass("cmw-title-from"),d=b.find("optgroup"),m=d.find("option").length/2+1,p=b.val(),r=Math.max(2,a);Math.abs(p)>=a&&b.val(0>p?1-a:a-1);m!==r&&d.each(function(a,b){var d=f(b),e=
u(a?c?"level_n":"to_level_n":"n_levels"),g;m>r&&d.find("option").slice(r-m).remove();for(g=m;g<r;g+=1)d.append(f("<option/>",{value:a?g:-g}).text(e.replace("%d",a?g:-g)))})}),b.find(".cmw-include-level,.cmw-exclude-level").each(function(){var b=f(this),c=b.find("option"),d=(c.length-1)/3,m=b.val(),p=c.eq(2).text(),r=c.eq(3).text();for(c.slice(3*a+1).remove();d<a;)d+=1,b.append(f("<option/>",{value:d}).text(d)).append(f("<option/>",{value:d+"-"}).text(p.replace(/\d+/,d))).append(f("<option/>",{value:d+
"+"}).text(r.replace(/\d+/,d)));parseInt(m,10)>a&&b.val("")}),b.find(".cmw-set-levels").each(function(){var b=f(this),c=b.hasClass("cmw-level")?"%d":u("n_levels"),d=b.data("cmwSetLevels")||0,m=b.find("option"),p=m.length-d;b.val()>a&&b.val(m.eq(0).val());for(b.find("option").slice(d+a).remove();p<a;)p+=1,b.append(f("<option/>",{value:p}).text(c.replace("%d",p)))}))},setFields:function(b,a){var c=a.find(".cmw-bybranch"),d=a.find(".cmw-byitems").prop("checked"),e=d||!c.prop("checked"),k=a.find(".cmw-assist-items"),
g=parseInt(k.val(),10);b.hasClass("cmw-select-menu")?(g=Q(k,g,b[0].selectedIndex),c=k.find("optgroup").data()||{},this.setLevels(a,c.cmwMaxLevel)):b.hasClass("cmw-level")?(e=!0,d=!e,a.find(".cmw-bylevel").prop("checked",e)):b.is(k)?(d=e=!1,c.prop("checked",!e)):b.hasClass("cmw-setitems")?(e=d=!0,a.find(".cmw-byitems").prop("checked",d)):b.hasClass("cmw-ancestors")&&"0"===b.val()?a.find(".cmw-ancestor-siblings").val("0"):b.hasClass("cmw-ancestor-siblings")&&"0"!==b.val()&&"0"===a.find(".cmw-ancestors").val()&&
a.find(".cmw-ancestors").val(b.val());c=a.find(".cmw-fallback").val();f.each({"-ss":d,"-ud":d||1>a.find(".cmw-depth").val(),"not-br":e,"not-br-ci":e||!!g,"not-fb-pc":e||!!g||"parent"!==c&&"current"!==c,"not-sw":!!a.find(".cmw-switchable").filter(function(){return!f(this).val()}).length},function(b,c){a.find(".cmw-disableif"+b).toggleClass("cmw-colour-grey",c)})},shortcode:function(b){var a={menu:b.menu},c="branch"===b.filter,d="items"===b.filter,e,k;b.title&&!b.hide_title&&(a.title=[b.title]);!c&&
!d&&1<b.level&&(a.level=b.level);c&&(a.branch=b.branch||"current",b.branch_start&&(a.start_at=[b.branch_start]),"level"===b.start_mode&&(a.start_mode=["level"]),b.allow_all_root&&(a.allow_all_root=1));d?(k="_items",a.items=[b[k]]):(0<b.depth&&(a.depth=b.depth),b.depth_rel_current&&0<b.depth&&(a.depth_rel_current=1));c&&!b.branch&&b.fallback&&(a.fallback=[b.fallback],"quit"!==b.fallback&&(b.fallback_siblings&&a.fallback.push("+siblings"),b.fallback_depth&&a.fallback.push(b.fallback_depth)));c&&b.ancestors&&
(a.ancestors=b.ancestors,b.ancestor_siblings&&(a.ancestor_siblings=b.ancestor_siblings));b.include_level&&(a.include_level=[b.include_level]);k="_exclude";b[k]&&(a.exclude=[b[k]]);b.exclude_level&&(a.exclude_level=[b.exclude_level]);k=[];""!==b.title_current&&k.push("current"+(b.title_current?b.title_current:""));c&&""!==b.title_branch&&k.push("branch"+(b.title_branch?b.title_branch:""));k.length&&(a.title_from=k,b.title_linked&&(a.title_linked=1));f.each("siblings flat_output ol_root ol_sub fallback_ci_parent fallback_ci_lifo".split(" "),
function(c,d){b[d]&&(a[d]=1)});f.each({contains_current:"",container:"div",container_id:"",container_class:"",menu_class:"menu-widget",widget_class:""},function(c,d){b[c]!==d&&(a[c]=[b[c]])});f.each({wrap_link:"before",wrap_link_text:"link_before"},function(c,d){var e=b[d].toString().match(/^<(\w+)/);e&&e[1]&&(a[c]=[e[1]])});b.switch_if&&b.switch_at&&(a.alternative=[b.switch_if,b.switch_at],e=N(b.switch_to));k=[];f.each(a,function(a,b){k.push(f.isArray(b)?a+'="'+b.join(",")+'"':a+"="+b)});return"[cmwizard "+
k.join(" ")+(e?"]"+e+"[/cmwizard]":"/]")},structureUpdate:function(b,a,c){var d=-1,e=9999,k=0,g=0,m="",p=null,r,h,q,n,v="menu",t="branch"===a.filter,u="items"===a.filter,x=!t&&!u,y=t&&!a.branch,G=!c&&!!a.switch_if&&!!a.switch_at,B=b.find(".cmw-demo-themenu-ul"),A=B.data().maxLevel,w=B.find(".current-menu-item").closest("li"),D=w.length?w.data().level:-1,l=B.find("li").removeData("included").removeClass("title-from-item"),H=a.depth,z=a.depth_rel_current,C=J(l,a,"cross");h=l.length&&w.is(l);a.contains_current!==
v||h||(l=f([]));if(G&&E(v,h,l.length,a)&&(p=F(a,b),!1!==p))return p;v="primary";u&&l.length&&(l=J(l,a,"tick"));t&&l.length&&(q=y?w:l.filter("[data-itemid="+a.branch+"]"),q.length?(d=q.data().level||0,l=q.add(q.find("li")),r=q):l=f([]));if(x&&l.length&&1<a.level){h=[];for(n=1;n<a.level;n+=1)h.push(".level-"+n);l=l.not(h.join(","))}h=l.length&&w.is(l);a.contains_current!==v||h||(l=f([]));if(G&&E(v,h,l.length,a)&&(p=F(a,b),!1!==p))return p;v="secondary";if(x&&l.length&&H&&(n=z&&D>=a.level?D:a.level,
n+=H,n<=A)){for(h=[];n<=A;n+=1)h.push(".level-"+n);l=l.not(h.join(","))}if(t&&l.length&&(h=parseInt(a.branch_start,10),h=isNaN(h)||!h?d:a.branch_start.match(/^(\+|-)/)?Math.max(1,d+h):h,y&&a.fallback&&!w.find("li").length&&(m="cmw-fellback-to-"+a.fallback,"quit"===a.fallback?h=A+1:(h="current"===a.fallback||2>d?d:d-1,a.fallback_depth&&(H=a.fallback_depth,z=1))),h>A?l=f([]):(h<d&&(q=q.parentsUntil(B,"li.level-"+h)),"level"===a.start_mode&&h<=d&&(1<h||a.allow_all_root)?l=q.parent().find("li"):h<d&&
(l=q.add(q.find("li"))),m&&a.fallback_siblings&&l.length&&(1<h||a.allow_all_root)&&(l=l.add(q.siblings("li.level-"+h)))),l.length)){d=h;q=9999;H&&(q=z&&D>=d&&l.filter(w).length?D:d,q+=H,e=q-1);h=[];for(n=1;n<=A;n+=1)n>=d&&n<q&&h.push(".level-"+n);l=l.filter(h.join(","))}h=l.length&&w.is(l);a.contains_current!==v||h||(l=f([]));if(G&&E(v,h,l.length,a)&&(p=F(a,b),!1!==p))return p;v="inclusions";if(t&&l.length){h=r.data().level;if(a.ancestors&&(r.is(l)||h>e)){n=a.ancestors;0>n&&(n=Math.max(1,h+n));d=
a.ancestor_siblings;0>d&&(d=Math.max(1,h+d));h=[];for(q=[];n<=A;n+=1)n<=e&&(h.push(".level-"+n),0<d&&n>=d&&q.push(".level-"+n));n=l.length;h=r.parentsUntil(B,h.join(","));l=l.add(h.not(l).data("included"," cmw-an-included-ancestor"));q.length&&(l=l.add(h.filter(q.join(",")).siblings("li").not(l).data("included"," cmw-an-included-ancestor-sibling")));k+=l.length-n}a.siblings&&r.is(l)&&(h=l.length,l=l.add(r.siblings("li").data("included"," cmw-an-included-sibling")),k+=l.length-h)}l.length&&a.include_level&&
(q=O(a.include_level,A))&&(h=l.length,l=l.add(B.find(q)),k+=l.length-h);h=l.length&&w.is(l);a.contains_current!==v||h||(l=f([]));if(G&&E(v,h,l.length,a)&&(p=F(a,b),!1!==p))return p;v="output";l.length&&C.length&&(h=l.length,l=l.not(C),g+=h-l.length);l.length&&a.exclude_level&&(q=O(a.exclude_level,A))&&(h=l.length,l=l.not(q),g+=h-l.length);h=l.length&&w.is(l);a.contains_current!==v||h||(l=f([]));if(G&&E(v,h,l.length,a)&&(p=F(a,b),!1!==p))return p;""!==a.title_current&&w.length?0===a.title_current?
w.addClass("title-from-item"):(n=0<a.title_current?Math.min(D,a.title_current):Math.max(1,D+a.title_current),w.closest(".level-"+n).addClass("title-from-item")):t&&r&&""!==a.title_branch&&(0===a.title_branch?r.addClass("title-from-item"):(n=r.data().level,n=0<a.title_branch?Math.min(n,a.title_branch):Math.max(1,n+a.title_branch),r.closest(".level-"+n).addClass("title-from-item")));b.find(".cmw-demo-fallback").data("fellback",m).toggleClass("updated",!!m);b.find(".cmw-demo-setcurrent").toggleClass("error",
!w.length&&(!!a.contains_current||y));c||null!==p||b.find(".cmw-demo-alternative").removeClass("error updated");b.find(".cmw-demo-themenu-ul").toggleClass("cmw-using-alternative",!!c);f.each({inclusions:k,exclusions:g},function(a,c){var d=b.find(".cmw-demo-"+a);d.text(d.text().replace(/\d+$/,c)).toggleClass("updated",0<c)});B.toggleClass("cmw-demo-filteritems",u).find(".picked").not(l.addClass("picked")).removeClass("picked");return!1},update:function(b){var a=f(b);b=y(a);var c=f("#"+b.data().cmwDialogId),
d;a.hasClass("cmw-listen")&&this.setFields(a,b);d=I(b);c.length&&c.dialog("isOpen")&&(c.dialog("moveToTop"),a.hasClass("cmw-select-menu")&&L(c),a=this.structureUpdate(c,d),!1!==a&&this.structureUpdate(c,a,!0),K(c,b),P(c,a||d));b.add(c).find("code").not(".cmw-instance-shortcode").text(this.shortcode(d))},v210:{setLevels:function(b,a){var c=b.find(".cmw-start-level"),d=c.val(),e=c.find("option").length;d>a&&c.val(1);for(c.find("option").slice(a).remove();e<a;)e+=1,c.append(f("<option/>",{value:e}).text(e));
c=b.find(".cmw-depth");d=c.val();e=c.find("option").length;d>a&&c.val(0);for(c.find("option").slice(a+1).remove();e<=a;)c.append(f("<option/>",{value:e}).text(e)),e+=1},setFields:function(b,a){var c=a.find(".cmw-showall").prop("checked"),d=a.find(".cmw-showspecific").prop("checked"),e=a.find(".cmw-assist-items"),k=parseInt(e.val(),10);b.hasClass("cmw-select-menu")&&(k=Q(e,k,b[0].selectedIndex),e=e.find("optgroup").data()||{},this.setLevels(a,e.cmwMaxLevel));f.each({"":c||d,"-ss":d,"not-rp":c||d||
0<=k,"not-ci":c||d||!!k},function(b,c){a.find(".cmw-disableif"+b).toggleClass("cmw-colour-grey",c).find("input,select").prop("disabled",c)})},shortcode:function(b){var a={menu:b.menu},c=!b.filter,d=0<b.filter,e;b.title&&(a.title=[b.title]);if(d)switch(b.filter_item){case 0:a.children_of=["current"];break;case -1:a.children_of=["parent"];break;case -2:a.children_of=["root"];break;default:a.children_of=b.filter_item}c||d||(e="_items",a.items=[b[e]]);d&&0>b.filter_item&&b.fallback_no_ancestor&&(a.fallback_parent=
b.fallback_include_parent_siblings?["siblings"]:b.fallback_include_parent?["parent"]:1);d&&!b.filter_item&&b.fallback_no_children&&(a.fallback_current=b.fallback_nc_include_parent_siblings?["siblings"]:b.fallback_nc_include_parent?["parent"]:1);1<b.start_level&&(a.start_level=b.start_level);0<b.depth&&(a.depth=b.depth);b.depth_rel_current&&0<b.depth&&(a.depth_rel_current=1);e=[];d&&(b.include_parent_siblings?e.push("siblings"):b.include_parent&&e.push("parent"),b.include_ancestors&&e.push("ancestors"),
e.length&&(a.include=e));e=[];d&&b.title_from_parent&&e.push("parent");b.title_from_current&&e.push("current");e.length&&(a.title_from=e);f.each(["flat_output","contains_current","ol_root","ol_sub"],function(c,d){b[d]&&(a[d]=1)});f.each({container:"div",container_id:"",container_class:"",menu_class:"menu-widget",widget_class:""},function(c,d){b[c]!==d&&(a[c]=[b[c]])});f.each({wrap_link:"before",wrap_link_text:"link_before"},function(c,d){var e=b[d].toString().match(/^<(\w+)/);e&&e[1]&&(a[c]=[e[1]])});
e=[];f.each(a,function(a,b){e.push(f.isArray(b)?a+'="'+b.join(" ")+'"':a+"="+b)});return"[custom_menu_wizard "+e.join(" ")+"]"},update:function(b){var a=f(b);b=y(a);var c=f("#"+b.data().cmwDialogId),d,e,k,g,m,p,r,h,q,n,v,t,u;a.hasClass("cmw-listen")&&this.setFields(a,b);if(c.length&&c.dialog("isOpen")){c.dialog("moveToTop");a.hasClass("cmw-select-menu")&&L(c);g=I(b);d=!g.filter;a=0<g.filter;e=!d&&!a;m=g.include_parent;p=g.include_parent_siblings;r=c.find(".cmw-demo-themenu-ul");k=r.data().maxLevel;
q=r.find(".current-menu-item").closest("li");n=q.length?q.data().level:-1;h=r.find("li").removeData("included").removeClass("title-from-item");e&&(h=J(h,g,"tick"));h.length&&!q.length&&(g.contains_current||a&&1>g.filter_item)&&(h=f([]));h.length&&a&&(0<g.filter_item?t=h.filter("[data-itemid="+g.filter_item+"]"):g.filter_item?1===n&&g.fallback_no_ancestor?(t=q,m=m||g.fallback_include_parent,p=p||g.fallback_include_parent_siblings,v="cmw-fellback-to-current"):t=1===n?r:-1>g.filter_item?r.find(".current-menu-ancestor").eq(0).closest("li"):
r.find(".current-menu-parent").closest("li"):q.find("li").length?t=q:g.fallback_no_children&&(t=r.find(".current-menu-parent").closest("li"),t.length||(t=r),m=m||g.fallback_nc_include_parent,p=p||g.fallback_nc_include_parent_siblings,v="cmw-fellback-to-parent"));if(h.length)if(d)for(u=g.depth_rel_current&&g.depth&&q.length&&n>=g.start_level?n+g.depth-1:g.depth?g.start_level+g.depth-1:9999,d=1;d<=k;d+=1){if(d<g.start_level||d>u)h=h.not(".level-"+d)}else t&&t.length?(u=g.depth_rel_current&&g.depth&&
q.length&&t.has(q[0]).length?n-1+g.depth:g.depth?Math.max((t.data().level||0)+g.depth,g.start_level+g.depth-1):9999,h=t.find("li").filter(function(){var a=f(this).data().level;return a>=g.start_level&&a<=u})):a&&(h=f([]));h.length&&a&&t&&t.is("li")&&(p&&(h=h.add(t.siblings("li").data("included"," cmw-an-included-parent-sibling")),m=!0),g.include_ancestors&&(h=h.add(t.parentsUntil(r,"li").data("included"," cmw-an-included-ancestor")),m=!0),m&&(h=h.add(t.data("included"," cmw-the-included-parent"))));
!h.length||!g.contains_current||q.length&&h.filter(q).length||(h=f([]));g.title_from_parent&&h.length&&t&&t.is("li")?t.addClass("title-from-item"):g.title_from_current&&h.length&&q.addClass("title-from-item");v=h.length?v:"";c.find(".cmw-demo-fallback").data("fellback",v).toggleClass("updated",!!v);c.find(".cmw-demo-setcurrent").toggleClass("error",!q.length&&(g.contains_current||a&&1>g.filter_item));r.toggleClass("cmw-demo-filteritems",e).find(".picked").not(h.addClass("picked")).removeClass("picked");
K(c,b);P(c,g);c.find("code").text(this.shortcode(g))}}}};f(document).on("change",x("onchange",1),C).on("click",x("assist",1),function(b){b=f(this);b=y(b);var a=b.data(),c=f("#"+a.cmwDialogId);c.length||(c=X(a).data({cmwOnchange:"#"+b.attr("id"),cmwUntitled:"["+u("untitled")+"]"}));c.dialog("isOpen")?c.dialog("close"):(L(c),K(c,b),c.dialog("open"),C.call(b[0]));this.blur();return!1}).on("click",x("fieldset",1),function(b){b=f(this);var a=b.next(".cmw-fieldset-state"),c=!a.prop("checked");a.length&&
(a.prop("checked",c),b.toggleClass("cmw-collapsed-fieldset",c),a.next("div")[c?"slideUp":"slideDown"]("fast"));this.blur();return!1}).on("click",".widget-action,.widget-control-close",function(b){b=f(this).closest("div.widget");var a=b.parent();a.hasClass("customize-control-widget_form")&&!a.hasClass("expanded")||y(b,1).each(function(){var a=f("#"+f(this).data().cmwDialogId);a.length&&a.dialog("isOpen")&&a.dialog("close")})}).on("click",".widget-control-remove",function(b){b=f(this).closest("div.widget");
y(b,1).each(function(){var a=f("#"+f(this).data().cmwDialogId);a.length&&(a.dialog("destroy"),a.remove())})}).on("click",x("colexp",1),function(b){b=/w-r/.test(this.className)?"slideUp":"slideDown";f(this).toggleClass("dashicons-arrow-right dashicons-arrow-down").prev("ul")[b]("fast");this.blur();return!1}).on("click",x("find-shortcodes",1),function(b){b=f(this);var a=b.parent().parent();ajaxurl&&!a.hasClass("cmw-ajax-fetching")&&(a.hasClass("cmw-ajax-showing")?a.removeClass("cmw-ajax-showing"):(a.addClass("cmw-ajax-fetching"),
f.get(ajaxurl,{action:"cmw-find-shortcodes",_wpnonce:b.data().nonce}).done(function(b){b&&"0"!==b&&(a.find(".cmw-demo-found-shortcodes").html(f(b).find("response_data").text()),a.addClass("cmw-ajax-showing"))}).always(function(){a.removeClass("cmw-ajax-fetching")})));this.blur();return!1}).on("click",x("legacy-close",1),function(){f(this).parent().remove();return!1});window.Custom_Menu_Wizard_Widget&&f(window.Custom_Menu_Wizard_Widget.trigger||[]).trigger("change")});