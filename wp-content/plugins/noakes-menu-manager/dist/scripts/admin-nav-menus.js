/*!
 * Admin nav menus JavaScript include.
 * 
 * @since 1.3.0
 * 
 * @package Nav Menu Manager
 */
var wpNavMenu=wpNavMenu||{},nmm_dragged_item=null,nmm_dropped_item=null,nmm_hovered_item=null;!function(e){"use strict";e.nmm=e.nmm||{},e.nmm.data=e.nmm.data||{},e.nmm.events=e.nmm.events||{},e.nmm.admin=e.nmm.admin||{},e.nmm.admin.nav_menus=e.nmm.admin.nav_menus||{},e.extend(e.nmm.data,{timeout:"nmm-timeout"}),e.extend(e.nmm.events,{extend:"nmm-extend"}),e.extend(e.nmm.admin.nav_menus,{callbacks:{stored:[],add:function(n){"function"==typeof n&&(e.nmm.admin.nav_menus.callbacks.stored[e.nmm.admin.nav_menus.callbacks.stored.length]=n)},fire:function(){e.nmm.admin.nav_menus.callbacks.stored.length>0&&e.nmm.admin.nav_menus.callbacks.stored.shift()()}},check_collapsibility:function(){var n=!1;e("#menu-to-edit > .menu-item").each(function(){var m=e(this);m.hasClass("deleting")||0===m.nmm_direct_child_menu_items().length?m.removeClass("nmm-collapsible nmm-collapsed"):(n=!0,m.addClass("nmm-collapsible"))});var m=e("#nmm-collapse-expand-all").stop(!0),t=m.is(":visible");n&&!t?m.slideDown(200,function(){e(this).css("height","")}):!n&&t&&m.slideUp(200,function(){e(this).css("height","")})},clear_hovered:function(){null!==nmm_hovered_item&&(clearTimeout(nmm_hovered_item.data(e.nmm.data.timeout)),nmm_hovered_item=null)},collapse_expand:function(){var n=e(".nmm-collapse-expand-all").first();n.parent().is("#post-body-content")||(n.attr("id","nmm-collapse-expand-all").insertBefore(n.closest("ul")),n.find(".nmm-collapse-all").click(function(){e(".nmm-collapsible").not(".nmm-collapsed").find(".nmm-collapse-expand").nmm_trigger_all("click")}),n.find(".nmm-expand-all").click(function(){e(".nmm-collapsed").find(".nmm-collapse-expand").nmm_trigger_all("click")})),e(".menu-item > .menu-item-settings > .nmm-buttons > .nmm-collapse-expand").each(function(){var n=e(this),m=n.closest(".menu-item").on(e.nmm.events.extend,function(){var n=e(this),m=null===nmm_hovered_item;!m&&nmm_hovered_item.is(n)||(m||e.nmm.admin.nav_menus.clear_hovered(),nmm_hovered_item=n,nmm_hovered_item.data(e.nmm.data.timeout,setTimeout(function(){nmm_hovered_item.find(".nmm-collapse-expand").triggerHandler("click"),e.nmm.admin.nav_menus.clear_hovered()},1e3)))});n.appendTo(m.find(".item-controls"))}).click(function(){var n=e(this).closest(".menu-item"),m=function(){e(this).css("height","")};if(n.hasClass("nmm-collapsed")){n.removeClass("nmm-collapsed");for(var t=n.nmm_direct_child_menu_items();t.length>0;)t.stop(!0).slideDown(200,m),t=t.filter(".nmm-collapsible").not(".nmm-collapsed").nmm_direct_child_menu_items()}else n.addClass("nmm-collapsed"),n.childMenuItems().stop(!0).slideUp(200,m)}),e.nmm.admin.nav_menus.check_collapsibility()},mousemove:function(){var n=nmm_dragged_item.position();n.right=n.left+nmm_dragged_item.width(),n.bottom=n.top+nmm_dragged_item.height();var m=wpNavMenu.menuList.children(".menu-item.nmm-collapsed:visible").not(nmm_dragged_item).filter(function(){var m=e(this),t=m.position();return t.top<=n.bottom&&t.top+m.height()>=n.top&&t.left<=n.right&&t.left+m.width()>=n.left}).first();0===m.length?e.nmm.admin.nav_menus.clear_hovered():m.is(nmm_hovered_item)||m.triggerHandler(e.nmm.events.extend)},override_nav_menus:function(){e.fn.default_shiftDepthClass=e.fn.shiftDepthClass,e.fn.shiftDepthClass=function(n){return this.default_shiftDepthClass(n),this.each(function(){var n=e(this);0===n.menuItemDepth()&&n.find(".is-submenu").hide()})},wpNavMenu.menuList.on("sortstart",function(n,m){nmm_dragged_item=m.item,e(window).mousemove(e.nmm.admin.nav_menus.mousemove)}).on("sortstop",function(n,m){e(window).unbind("mousemove",e.nmm.admin.nav_menus.mousemove),e.nmm.admin.nav_menus.clear_hovered(),nmm_dragged_item=null,nmm_dropped_item=m.item}),wpNavMenu.default_addItemToMenu=wpNavMenu.addItemToMenu,wpNavMenu.default_eventOnClickMenuItemDelete=wpNavMenu.eventOnClickMenuItemDelete,wpNavMenu.default_registerChange=wpNavMenu.registerChange,wpNavMenu.addItemToMenu=function(n,m,t){e(".menu-item.pending:hidden").addClass("hidden"),e.nmm.admin.nav_menus.callbacks.add(t),t=function(){e(".menu-item.hidden").stop(!0,!0).hide().removeClass("hidden"),e.nmm.admin.nav_menus.callbacks.fire(),e.nmm.admin.help_buttons(),e.nmm.admin.nav_menus.collapse_expand()},wpNavMenu.default_addItemToMenu(n,m,t)},wpNavMenu.eventOnClickMenuItemDelete=function(n){var m=e(n).closest(".menu-item");return m.is(".nmm-collapsed")&&m.find(".nmm-collapse-expand").nmm_trigger_all("click"),wpNavMenu.default_eventOnClickMenuItemDelete(n),!1},wpNavMenu.registerChange=function(){if(wpNavMenu.default_registerChange(),e.nmm.admin.nav_menus.check_collapsibility(),null!==nmm_dropped_item){for(var n=nmm_dropped_item.menuItemDepth();n>0;){n-=1;var m=nmm_dropped_item.prevAll(".menu-item-depth-"+n).first();m.hasClass("nmm-collapsed")&&m.find(".nmm-collapse-expand").triggerHandler("click")}nmm_dropped_item=null}}}}),e.fn.extend({nmm_direct_child_menu_items:function(){var n=e();return this.each(function(){for(var m=e(this),t=m.menuItemDepth(),i=m.next(".menu-item"),a=0===i.length?t:i.menuItemDepth(),l=a;i.length>0&&l>t;)i.hasClass("deleting")?n=n.add(i.nmm_direct_child_menu_items()):l===a&&(n=n.add(i)),i=i.next(".menu-item"),l=0===i.length?t:i.menuItemDepth()}),n}}),e.nmm.include.scroll_stop(),e(document).ready(function(){e(document.body).hasClass("nmm-collapse-expand-enabled")&&(e.nmm.admin.nav_menus.override_nav_menus(),e.nmm.admin.nav_menus.collapse_expand())})}(jQuery);
//# sourceMappingURL=admin-nav-menus.js.map
