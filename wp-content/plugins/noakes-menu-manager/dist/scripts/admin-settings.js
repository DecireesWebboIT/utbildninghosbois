/*!
 * Admin settings JavaScript include.
 * 
 * @since 1.3.0
 * 
 * @package Nav Menu Manager
 */
var pagenow=pagenow||"",postboxes=postboxes||{},nmm_admin_settings_l10n=nmm_admin_settings_l10n||{};!function(e){"use strict";e.nmm=e.nmm||{},e.nmm.data=e.nmm.data||{},e.nmm.events=e.nmm.events||{},e.nmm.include=e.nmm.include||{},e.nmm.is=e.nmm.is||{},e.nmm.admin=e.nmm.admin||{},e.nmm.admin.settings=e.nmm.admin.settings||{},e.extend(e.nmm.data,{compare:"nmm-compare",conditional:"nmm-conditional",field:"nmm-field",index:"nmm-index",template_name:"nmm-template-name",value:"nmm-value"}),e.extend(e.nmm.events,{check_conditions:"nmm-check-conditions",finalize:"nmm-finalize",scale:"nmm-scale",set_index:"nmm-set-index"}),e.extend(e.nmm.include,{postboxes:function(){e.nmm.is.included("postboxes")||(e(".if-js-closed").removeClass("if-js-closed").addClass("closed"),"undefined"!=typeof postboxes&&"undefined"!=typeof pagenow&&postboxes.add_postbox_toggles(pagenow))},resize:function(){e.nmm.is.included("resize")||e(window).resize(function(){e("."+e.nmm.events.scale).nmm_trigger_all(e.nmm.events.scale)})}}),e.extend(e.nmm.is,{numeric:function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}}),e.extend(e.nmm.admin.settings,{code_fields:function(){e(".nmm-field-code").each(function(){var n=e(this);n.find("pre").nmm_select_text(),n.find("button[id]").click(function(){var n=e(this),t=e("#"+n.attr("id")+"-code");!n.hasClass("button-primary")&&t.length>0&&(n.addClass("button-primary").siblings("button").removeClass("button-primary"),n.siblings("pre").hide(),t.show())})})},conditional_logic:function(){e(".nmm-condition[data-"+e.nmm.data.conditional+"][data-"+e.nmm.data.field+"][data-"+e.nmm.data.value+"][data-"+e.nmm.data.compare+"]").each(function(){var n=e(this),t=e('[name="'+n.data(e.nmm.data.conditional)+'"]'),a=e('[name="'+n.data(e.nmm.data.field)+'"]');t.hasClass(e.nmm.events.check_conditions)||t.nmm_add_event(e.nmm.events.check_conditions,function(){var n=e(this),t=!0;e(".nmm-condition[data-"+e.nmm.data.conditional+'="'+n.attr("name")+'"][data-'+e.nmm.data.field+"][data-"+e.nmm.data.value+"][data-"+e.nmm.data.compare+"]").each(function(){var n=e(this),a=e('[name="'+n.data(e.nmm.data.field)+'"]'),m=a.is(":radio")?a.filter(":checked").val():a.val(),i=n.data(e.nmm.data.compare),d=!1;a.is(":checkbox")&&(m=a.is(":checked")?m:""),d="!="===i?n.data(e.nmm.data.value)+""!=m+"":n.data(e.nmm.data.value)+""==m+"",t=t&&d});var a=n.closest(".nmm-field");a.next(".nmm-field-spacer").remove(),t?a.stop(!0).slideDown("fast"):a.stop(!0).slideUp("fast").after(e("<div/>").addClass("hidden nmm-field-spacer"))}),a.hasClass("nmm-has-condition")||a.addClass("nmm-has-condition").on("change",function(){e(".nmm-condition[data-"+e.nmm.data.conditional+"][data-"+e.nmm.data.field+'="'+e(this).attr("name")+'"][data-'+e.nmm.data.value+"][data-"+e.nmm.data.compare+"]").each(function(){e('[name="'+e(this).data(e.nmm.data.conditional)+'"]').nmm_trigger_all(e.nmm.events.check_conditions)})})})},forms:function(){e.extend(e.validator.messages,nmm_admin_settings_l10n.validator),e.validator.addMethod("nmm-location",function(n,t){if(this.optional(t))return!0;var a=e(t),m=!0;return a.closest(".nmm-meta-box").find(".nmm-location:visible").not(a).each(function(){var t=e(this);m=t.is("td")?m&&(n!==t.text()||t.prev().children("input").is(":checked")):m&&n!==t.val()}),m}),e.validator.addClassRules("nmm-location",{"nmm-location":!0}),e("#noakes_menu_manager_settings,#noakes_menu_manager_generator").children("form").nmm_validate_form().find('[type="submit"]').prop("disabled",!1)},repeatable:function(){e(".nmm-repeatable").nmm_add_event(e.nmm.events.scale,function(){var n=e(this);n.width()<480?n.addClass("nmm-thin-repeatable"):n.removeClass("nmm-thin-repeatable")}).on(e.nmm.events.setup,function(){var n=e(this);!n.hasClass("ui-sortable")&&n.is(":visible")&&(n.mousedown(function(){var n=e(this);n.height(n.height())}).mouseup(function(){e(this).css("height","")}).sortable({containment:"parent",cursor:"move",forcePlaceholderSize:!0,handle:"> .nmm-repeatable-move",items:"> .nmm-repeatable-field",opacity:.75,placeholder:"nmm-repeatable-placeholder",revert:200,tolerance:"pointer",stop:function(n,t){t.item.parent(".nmm-repeatable").children(".nmm-repeatable-field").first().triggerHandler(e.nmm.events.set_index,[0])}}),n.children(".nmm-repeatable-field").length<=1&&n.sortable("disable"))}).nmm_trigger_all(e.nmm.events.setup),e(".nmm-repeatable-field,.nmm-repeatable-template").mouseenter(function(){e(this).addClass("nmm-hover")}).mouseleave(function(){e(this).removeClass("nmm-hover")}).on(e.nmm.events.finalize,function(){e(this).css("opacity","0").animate({opacity:"1"},{queue:!1})}).on(e.nmm.events.set_index,function(n,t){if(e.nmm.is.numeric(t)&&t>=0){var a=e(this);if(t!==a.data(e.nmm.data.index)){a.data(e.nmm.data.index,t);var m=e("<div/>").addClass("nmm-repeatable-placeholder").insertBefore(a),i=a.parents(".nmm-repeatable-field"),d=[];i.each(function(){d[d.length]=e(this).data(e.nmm.data.index)}),d=d.reverse(),a.children(".nmm-repeatable-count").text(t+1),a=a.detach(),a.find("[data-"+e.nmm.data.template_name+"]").nmm_trigger_all(e.nmm.events.finalize,[d]),a.removeClass("nmm-first").insertAfter(m),0===t&&a.addClass("nmm-first"),m.remove()}a.next(".nmm-repeatable-field").triggerHandler(e.nmm.events.set_index,[t+1])}}),e(".nmm-repeatable-move-down").click(function(){var n=e(this).parent(),t=n.next(".nmm-repeatable-field");t.length>0&&(n.insertAfter(t).add(t).nmm_trigger_all(e.nmm.events.finalize),t.triggerHandler(e.nmm.events.set_index,[n.data(e.nmm.data.index)]))}),e(".nmm-repeatable-move-up").click(function(){var n=e(this).parent(),t=n.prev(".nmm-repeatable-field");t.length>0&&(n.insertBefore(t).add(t).nmm_trigger_all(e.nmm.events.finalize),n.triggerHandler(e.nmm.events.set_index,[t.data(e.nmm.data.index)]))}),e(".nmm-repeatable-insert").click(function(){var n=e(this).parent(".nmm-repeatable-field");n.parent(".nmm-repeatable").children(".nmm-repeatable-add").children("button").triggerHandler("click",[n])}),e(".nmm-repeatable-remove").click(function(){var n=e(this).parent(".nmm-repeatable-field");n.find(".ui-sortable").sortable("destroy"),n.next(".nmm-repeatable-field").triggerHandler(e.nmm.events.set_index,[n.data(e.nmm.data.index)]);var t=n.parent(".nmm-repeatable");t.children(".nmm-repeatable-field").length<=2&&t.sortable("disable"),n.addClass("nmm-animating").animate({height:"0px"},{queue:!1,complete:function(){e(this).remove()}})}),e("[data-"+e.nmm.data.template_name+"]").on(e.nmm.events.finalize,function(n,t){var a=e(this);if(e.isArray(t)&&0===a.closest(".nmm-repeatable-template").length){var m=t.slice(0),i=a.closest(".nmm-repeatable-field").parents(".nmm-repeatable-field").addBack(),d=a.data(e.nmm.data.template_name);i.each(function(){m[m.length]=e(this).data(e.nmm.data.index)}),e.each(m,function(e,n){d=d.replace("%d",n)}),a.attr({id:d,name:d});var s=a.closest(".nmm-field-input");s.find("[for]").attr("for",d),s.closest(".nmm-field").children(".nmm-field-label").find("[for]").attr("for",d)}}),e(".nmm-repeatable-add button").click(function(n,t){var a=e(this).closest(".nmm-repeatable"),m=a.children(".nmm-repeatable-template").first(),i=-1;t instanceof e&&t.length>0?(t=t.first(),i=t.data(e.nmm.data.index)):(t=m,i=a.children(".nmm-repeatable-field").length);var d=m.clone(!0,!0).toggleClass("nmm-repeatable-field nmm-repeatable-template").addClass("nmm-animating").css("opacity","0").insertBefore(t),s=d.closest(".nmm-repeatable").sortable("refresh");s.children(".nmm-repeatable-field").length>1&&s.sortable("enable"),s.find(".nmm-repeatable").nmm_trigger_all(e.nmm.events.setup),d.triggerHandler(e.nmm.events.set_index,[i]);var l=d.height();d.css({height:"0",opacity:""}).animate({height:l+"px"},{queue:!1,complete:function(){e(this).removeClass("nmm-animating").css("height","")}})})}}),e.fn.extend({nmm_add_event:function(e,n){return this.addClass(e).on(e,n).nmm_trigger_all(e)},nmm_select_text:function(){return this.click(function(){var e,n;document.body.createTextRange?(e=document.body.createTextRange(),e.moveToElementText(this),e.select()):window.getSelection&&(n=window.getSelection(),e=document.createRange(),e.selectNodeContents(this),n.removeAllRanges(),n.addRange(e))})},nmm_validate_form:function(){return this.each(function(){e(this).validate({errorClass:"nmm-error",errorElement:"div",focusInvalid:!1,errorPlacement:function(e,n){var t=n.parent();n.is('[type="checkbox"]')?e.addClass("nmm-standalone").appendTo(t.parent()):e.insertAfter(t),e.hide().slideDown(200)},invalidHandler:function(n,t){if(t.numberOfInvalids()){var a=e(window),m=e("#wpadminbar").height(),i=a.height()-m,d=e(t.errorList[0].element),s=d.outerHeight(),l=d.offset().top,r=l-m;r-=s>i?0:Math.floor((i-s)/2),e("html,body").animate({scrollTop:Math.max(0,Math.min(e(document).height()-i,r))+"px"},{queue:!1})}},submitHandler:function(n){e(n).find('[type="submit"]').prop("disabled",!0),n.submit()}})})}}),e.nmm.include.postboxes(),e.nmm.include.resize(),e.nmm.include.scroll_stop(),e.nmm.admin.settings.code_fields(),e.nmm.admin.settings.conditional_logic(),e.nmm.admin.settings.forms(),e.nmm.admin.settings.repeatable()}(jQuery);
//# sourceMappingURL=admin-settings.js.map
